<?xml version="1.0" ?>
<project name="Geometry Shader - Realistic Water Terrain" width="512" height="512">
	<assets>
		<attributes>
		    <!-- Controlos existentes -->
			<attribute type="RENDERER" name="heightScale" data="FLOAT" value="2.0"/>
		    <attribute type="RENDERER" name="noiseScale" data="FLOAT" value="0.01"/>
		    <attribute type="RENDERER" name="waterLevel" data="FLOAT" value="0.3"/>
		    <attribute type="RENDERER" name="contrast" data="FLOAT" value="1.0"/>
		    <attribute type="RENDERER" name="ambientLight" data="FLOAT" value="0.2"/>
		    <attribute type="RENDERER" name="fogIntensity" data="FLOAT" value="0.005"/>
		    
		    <!-- Controlos para água -->
		    <attribute type="RENDERER" name="waterTransparency" data="FLOAT" value="0.8"/>
		    <attribute type="RENDERER" name="waterReflection" data="FLOAT" value="128"/>
		    
		    <!-- NOVOS controlos para texturas -->
		    <attribute type="RENDERER" name="textureScale" data="FLOAT" value="2.0"/>
		    <attribute type="RENDERER" name="textureBlending" data="FLOAT" value="1.0"/>
		</attributes>
		
		<scenes>
		    <scene name="MainScene" param="UNITIZE ">
		        <file name="models/teapot.obj"/>
		    </scene>
		    <scene name="terrainField" >
		        <buffers name="terrainField" primitive="POINTS" material="terrainField" >
		            <position name="point" fromLibrary="geom test" />
		        </buffers>
		        <buffers name="waterField" primitive="POINTS" material="waterField" >
		            <position name="point" fromLibrary="geom test" />
		        </buffers>
		    </scene>
		</scenes>
		
		<viewports>
			<viewport name="MainViewport">
    			<CLEAR_COLOR r="0.5" g="0.7" b="1.0" />
			</viewport>
		</viewports>
		
		<cameras>
		    <!-- CÂMARA 1: Vista Aérea para ver lagos -->
		    <camera name="AerialCamera">
		        <viewport name="MainViewport" />
		        <POSITION x="75" y="25" z="75" />
		        <VIEW x="-0.6" y="-0.5" z="-0.6" />
		        <UP x="0" y="1" z="0" />
		        <NEAR value="0.1" />
		        <FAR value="1000" />
		    </camera>

		    <!-- CÂMARA 2: Vista Intermédia (ideal para ver água) -->
		    <camera name="WaterCamera">
		        <viewport name="MainViewport" />
		        <POSITION x="30" y="8" z="30" />
		        <VIEW x="-0.5" y="-0.2" z="-0.5" />
		        <UP x="0" y="1" z="0" />
		        <NEAR value="0.1" />
		        <FAR value="1000" />
		    </camera>

		    <!-- CÂMARA 3: Vista ao nível da água -->
		    <camera name="LakesideCamera">
		        <viewport name="MainViewport" />
		        <POSITION x="15" y="3" z="15" />
		        <VIEW x="-0.8" y="0.0" z="-0.6" />
		        <UP x="0" y="1" z="0" />
		        <NEAR value="0.1" />
		        <FAR value="500" />
		    </camera>
		</cameras>
		
		<lights>
			<light name="Sun" >
				<DIRECTION x="2" y="1" z="2" />
			</light>
		</lights>
		
		<materialLibs>
			<materialLib filename="geomTest.mlib"/>
		</materialLibs>
		
	</assets>
	
	<pipelines>
	    <pipeline name="p1" >
	        <pass class="default" name="terrainField">
	            <scenes instances = "1000000">
	                <scene name="terrainField" />
	            </scenes>
	            <camera name="WaterCamera" />
	            <viewport name="MainViewport" />
	            <lights>
	                <light name="Sun" />
	            </lights>
	            <materialMaps>
	                <map fromMaterial="terrainField"  toMaterial="terrainField" toLibrary="geom test" />
	                <map fromMaterial="waterField"  toMaterial="waterField" toLibrary="geom test" />
	            </materialMaps>
	        </pass>
	    </pipeline>
	</pipelines>

	<interface>
	    <window label="Terrain Controls" >
	        <var label="Height Scale" type="RENDERER" context="CURRENT" 
	                component="heightScale" def="min=0.001 max=20 step=0.1" />
	
	        <var label="Noise Scale" type="RENDERER" context="CURRENT" 
	                component="noiseScale" def="min=0.01 max=0.2 step=0.01" />
	
	        <var label="Water Level" type="RENDERER" context="CURRENT" 
	                component="waterLevel" def="min=0.0 max=1.0 step=0.05" />
	
	        <var label="Contrast" type="RENDERER" context="CURRENT" 
	                component="contrast" def="min=0.1 max=3.0 step=0.1" />
	    </window>
	
	    <window label="Water Settings" >
	        <var label="Water Transparency" type="RENDERER" context="CURRENT" 
	                component="waterTransparency" def="min=0.3 max=1.0 step=0.05" />
	
	        <var label="Water Reflection" type="RENDERER" context="CURRENT" 
	                component="waterReflection" def="min=0.0 max=1024.0 step=10" />
	    </window>
	
	    <window label="Texture Settings" >
	        <var label="Texture Scale" type="RENDERER" context="CURRENT" 
	                component="textureScale" def="min=1.0 max=10.0 step=0.5" />
	
	        <var label="Texture Blending" type="RENDERER" context="CURRENT" 
	                component="textureBlending" def="min=0.0 max=2.0 step=0.1" />
	    </window>
	
	    <window label="Lighting" >
	        <var label="Ambient Light" type="RENDERER" context="CURRENT" 
	                component="ambientLight" def="min=0.0 max=1.0 step=0.05" />
	
	        <var label="Fog Intensity" type="RENDERER" context="CURRENT" 
	                component="fogIntensity" def="min=0.0 max=0.02 step=0.001" />
	    </window>
	</interface>
</project>